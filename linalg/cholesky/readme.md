See pytorch PR https://github.com/pytorch/pytorch/pull/53104

before master commit 1.9.0a0+git68b6249

after commit 1.9.0a0+gitdce610d

This page was tested on E5-2680 v3 and RTX 2070 Super. Libraries: intel-mkl 2020.2.254-1 and cuda 11.2

- before: magma
- after: potrf + potrfBatched (when batch_size >= 2) **[this PR]**

time is in **us** (10^-6 s)

|shape|cpu|before_magma|after_potrf_and_batched|
|---:|---:|---:|---:|
| [] 2 torch.float32 |  19.055 |  2280.221 |  35.030 |
| [] 4 torch.float32 |  14.152 |  2303.458 |  35.046 |
| [] 8 torch.float32 |  17.151 |  2326.320 |  35.175 |
| [] 16 torch.float32 |  19.888 |  2358.930 |  35.133 |
| [] 32 torch.float32 |  22.837 |  2341.613 |  35.418 |
| [] 64 torch.float32 |  49.388 |  2383.232 |  42.917 |
| [] 128 torch.float32 |  168.919 |  2431.619 |  82.173 |
| [] 256 torch.float32 |  415.945 |  2884.719 |  171.727 |
| [] 512 torch.float32 |  1567.114 |  3219.271 |  397.378 |
| [] 1024 torch.float32 |  6100.324 |  3948.443 |  953.525 |
| [] 2048 torch.float32 |  43855.028 |  6239.588 |  2755.491 |
| [1] 2 torch.float32 |  17.567 |  55.177 |  35.341 |
| [1] 4 torch.float32 |  17.678 |  55.194 |  35.539 |
| [1] 8 torch.float32 |  18.053 |  56.533 |  35.596 |
| [1] 16 torch.float32 |  19.512 |  62.417 |  35.927 |
| [1] 32 torch.float32 |  22.422 |  74.961 |  35.769 |
| [1] 64 torch.float32 |  54.413 |  102.557 |  42.919 |
| [1] 128 torch.float32 |  169.238 |  170.707 |  70.264 |
| [1] 256 torch.float32 |  432.289 |  374.914 |  146.682 |
| [1] 512 torch.float32 |  1205.813 |  1147.444 |  337.876 |
| [1] 1024 torch.float32 |  4601.706 |  4157.900 |  954.473 |
| [1] 2048 torch.float32 |  28580.566 |  6390.159 |  2754.500 |
| [2] 2 torch.float32 |  20.761 |  54.883 |  59.240 |
| [2] 4 torch.float32 |  20.363 |  55.135 |  59.264 |
| [2] 8 torch.float32 |  21.775 |  56.541 |  59.102 |
| [2] 16 torch.float32 |  24.421 |  61.926 |  59.221 |
| [2] 32 torch.float32 |  29.667 |  74.519 |  67.042 |
| [2] 64 torch.float32 |  76.576 |  101.504 |  82.712 |
| [2] 128 torch.float32 |  254.089 |  168.731 |  111.827 |
| [2] 256 torch.float32 |  599.307 |  369.279 |  205.888 |
| [2] 512 torch.float32 |  1637.425 |  1204.858 |  522.455 |
| [2] 1024 torch.float32 |  5790.532 |  4448.121 |  1589.960 |
| [2] 2048 torch.float32 |  40138.750 |  7395.678 |  5928.248 |
| [4] 2 torch.float32 |  19.804 |  41.088 |  42.454 |
| [4] 4 torch.float32 |  19.767 |  41.878 |  42.386 |
| [4] 8 torch.float32 |  21.751 |  42.951 |  42.989 |
| [4] 16 torch.float32 |  27.984 |  48.655 |  42.655 |
| [4] 32 torch.float32 |  42.049 |  61.765 |  50.501 |
| [4] 64 torch.float32 |  136.775 |  91.196 |  63.519 |
| [4] 128 torch.float32 |  576.380 |  166.014 |  95.640 |
| [4] 256 torch.float32 |  848.511 |  385.509 |  221.888 |
| [4] 512 torch.float32 |  2480.692 |  1304.622 |  613.503 |
| [4] 1024 torch.float32 |  7707.767 |  4886.211 |  2107.344 |
| [4] 2048 torch.float32 |  55563.672 |  9442.459 |  8907.055 |
| [8] 2 torch.float32 |  18.787 |  41.769 |  42.939 |
| [8] 4 torch.float32 |  18.123 |  43.375 |  42.443 |
| [8] 8 torch.float32 |  21.067 |  44.121 |  42.948 |
| [8] 16 torch.float32 |  29.974 |  50.869 |  42.498 |
| [8] 32 torch.float32 |  61.718 |  64.079 |  51.111 |
| [8] 64 torch.float32 |  174.167 |  96.937 |  63.341 |
| [8] 128 torch.float32 |  745.488 |  176.674 |  103.029 |
| [8] 256 torch.float32 |  1331.958 |  432.471 |  258.526 |
| [8] 512 torch.float32 |  4076.162 |  1462.709 |  790.236 |
| [8] 1024 torch.float32 |  17392.765 |  5786.699 |  3151.025 |
| [16] 2 torch.float32 |  20.866 |  42.434 |  43.010 |
| [16] 4 torch.float32 |  21.590 |  43.252 |  42.318 |
| [16] 8 torch.float32 |  27.167 |  44.373 |  42.324 |
| [16] 16 torch.float32 |  49.028 |  51.100 |  42.846 |
| [16] 32 torch.float32 |  116.404 |  64.965 |  49.931 |
| [16] 64 torch.float32 |  388.556 |  98.290 |  63.181 |
| [16] 128 torch.float32 |  1330.891 |  185.933 |  117.122 |
| [16] 256 torch.float32 |  2376.293 |  492.626 |  335.315 |
| [16] 512 torch.float32 |  7307.411 |  1754.295 |  1171.981 |
| [32] 2 torch.float32 |  22.934 |  42.380 |  42.502 |
| [32] 4 torch.float32 |  23.678 |  43.250 |  42.658 |
| [32] 8 torch.float32 |  31.927 |  44.699 |  42.715 |
| [32] 16 torch.float32 |  94.794 |  50.902 |  43.057 |
| [32] 32 torch.float32 |  135.281 |  65.271 |  50.708 |
| [32] 64 torch.float32 |  529.833 |  99.046 |  62.631 |
| [32] 128 torch.float32 |  2911.740 |  214.874 |  153.772 |
| [32] 256 torch.float32 |  4753.231 |  610.045 |  518.030 |
| [64] 2 torch.float32 |  29.902 |  42.636 |  43.020 |
| [64] 4 torch.float32 |  35.429 |  43.522 |  42.179 |
| [64] 8 torch.float32 |  49.895 |  44.746 |  43.572 |
| [64] 16 torch.float32 |  135.721 |  50.989 |  42.832 |
| [64] 32 torch.float32 |  224.029 |  65.572 |  49.696 |
| [64] 64 torch.float32 |  961.395 |  104.305 |  76.027 |
| [64] 128 torch.float32 |  5609.256 |  271.441 |  225.720 |
| [128] 2 torch.float32 |  52.542 |  42.892 |  42.747 |
| [128] 4 torch.float32 |  62.965 |  43.840 |  43.114 |
| [128] 8 torch.float32 |  96.781 |  44.832 |  42.930 |
| [128] 16 torch.float32 |  222.146 |  51.180 |  42.766 |
| [128] 32 torch.float32 |  376.536 |  66.161 |  49.907 |
| [128] 64 torch.float32 |  1880.561 |  133.194 |  114.067 |
| [256] 2 torch.float32 |  66.206 |  44.754 |  42.242 |
| [256] 4 torch.float32 |  81.555 |  45.447 |  42.391 |
| [256] 8 torch.float32 |  147.877 |  47.612 |  42.688 |
| [256] 16 torch.float32 |  336.137 |  54.235 |  42.174 |
| [256] 32 torch.float32 |  634.189 |  74.383 |  64.845 |
| [512] 2 torch.float32 |  112.168 |  46.233 |  42.259 |
| [512] 4 torch.float32 |  140.019 |  47.107 |  42.090 |
| [512] 8 torch.float32 |  268.559 |  49.280 |  42.298 |
| [512] 16 torch.float32 |  573.994 |  57.851 |  42.053 |
| [1024] 2 torch.float32 |  203.898 |  48.189 |  41.716 |
| [1024] 4 torch.float32 |  258.988 |  48.978 |  41.807 |
| [1024] 8 torch.float32 |  438.113 |  53.205 |  41.791 |
